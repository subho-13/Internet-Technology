{"ast":null,"code":"/**\n * Module dependencies.\n */\nvar http = require('http');\n\nvar read = require('fs').readFileSync;\n\nvar engine = require('engine.io');\n\nvar client = require('socket.io-client');\n\nvar clientVersion = require('socket.io-client/package').version;\n\nvar Client = require('./client');\n\nvar Emitter = require('events').EventEmitter;\n\nvar Namespace = require('./namespace');\n\nvar Adapter = require('socket.io-adapter');\n\nvar debug = require('debug')('socket.io:server');\n\nvar url = require('url');\n/**\n * Module exports.\n */\n\n\nmodule.exports = Server;\n/**\n * Socket.IO client source.\n */\n\nvar clientSource = undefined;\nvar clientSourceMap = undefined;\n/**\n * Server constructor.\n *\n * @param {http.Server|Number|Object} srv http server, port or options\n * @param {Object} [opts]\n * @api public\n */\n\nfunction Server(srv, opts) {\n  if (!(this instanceof Server)) return new Server(srv, opts);\n\n  if ('object' == typeof srv && !srv.listen) {\n    opts = srv;\n    srv = null;\n  }\n\n  opts = opts || {};\n  this.nsps = {};\n  this.path(opts.path || '/socket.io');\n  this.serveClient(false !== opts.serveClient);\n  this.adapter(opts.adapter || Adapter);\n  this.origins(opts.origins || '*:*');\n  this.sockets = this.of('/');\n  if (srv) this.attach(srv, opts);\n}\n/**\n * Server request verification function, that checks for allowed origins\n *\n * @param {http.IncomingMessage} req request\n * @param {Function} fn callback to be called with the result: `fn(err, success)`\n */\n\n\nServer.prototype.checkRequest = function (req, fn) {\n  var origin = req.headers.origin || req.headers.referer; // file:// URLs produce a null Origin which can't be authorized via echo-back\n\n  if ('null' == origin || null == origin) origin = '*';\n  if (!!origin && typeof this._origins == 'function') return this._origins(origin, fn);\n  if (this._origins.indexOf('*:*') !== -1) return fn(null, true);\n\n  if (origin) {\n    try {\n      var parts = url.parse(origin);\n      var defaultPort = 'https:' == parts.protocol ? 443 : 80;\n      parts.port = parts.port != null ? parts.port : defaultPort;\n      var ok = ~this._origins.indexOf(parts.hostname + ':' + parts.port) || ~this._origins.indexOf(parts.hostname + ':*') || ~this._origins.indexOf('*:' + parts.port);\n      return fn(null, !!ok);\n    } catch (ex) {}\n  }\n\n  fn(null, false);\n};\n/**\n * Sets/gets whether client code is being served.\n *\n * @param {Boolean} v whether to serve client code\n * @return {Server|Boolean} self when setting or value when getting\n * @api public\n */\n\n\nServer.prototype.serveClient = function (v) {\n  if (!arguments.length) return this._serveClient;\n  this._serveClient = v;\n\n  if (v && !clientSource) {\n    clientSource = read(require.resolve('socket.io-client/dist/socket.io.min.js'), 'utf-8');\n\n    try {\n      clientSourceMap = read(require.resolve('socket.io-client/dist/socket.io.js.map'), 'utf-8');\n    } catch (err) {\n      debug('could not load sourcemap file');\n    }\n  }\n\n  return this;\n};\n/**\n * Old settings for backwards compatibility\n */\n\n\nvar oldSettings = {\n  \"transports\": \"transports\",\n  \"heartbeat timeout\": \"pingTimeout\",\n  \"heartbeat interval\": \"pingInterval\",\n  \"destroy buffer size\": \"maxHttpBufferSize\"\n};\n/**\n * Backwards compatibility.\n *\n * @api public\n */\n\nServer.prototype.set = function (key, val) {\n  if ('authorization' == key && val) {\n    this.use(function (socket, next) {\n      val(socket.request, function (err, authorized) {\n        if (err) return next(new Error(err));\n        if (!authorized) return next(new Error('Not authorized'));\n        next();\n      });\n    });\n  } else if ('origins' == key && val) {\n    this.origins(val);\n  } else if ('resource' == key) {\n    this.path(val);\n  } else if (oldSettings[key] && this.eio[oldSettings[key]]) {\n    this.eio[oldSettings[key]] = val;\n  } else {\n    console.error('Option %s is not valid. Please refer to the README.', key);\n  }\n\n  return this;\n};\n/**\n * Sets the client serving path.\n *\n * @param {String} v pathname\n * @return {Server|String} self when setting or value when getting\n * @api public\n */\n\n\nServer.prototype.path = function (v) {\n  if (!arguments.length) return this._path;\n  this._path = v.replace(/\\/$/, '');\n  return this;\n};\n/**\n * Sets the adapter for rooms.\n *\n * @param {Adapter} v pathname\n * @return {Server|Adapter} self when setting or value when getting\n * @api public\n */\n\n\nServer.prototype.adapter = function (v) {\n  if (!arguments.length) return this._adapter;\n  this._adapter = v;\n\n  for (var i in this.nsps) {\n    if (this.nsps.hasOwnProperty(i)) {\n      this.nsps[i].initAdapter();\n    }\n  }\n\n  return this;\n};\n/**\n * Sets the allowed origins for requests.\n *\n * @param {String} v origins\n * @return {Server|Adapter} self when setting or value when getting\n * @api public\n */\n\n\nServer.prototype.origins = function (v) {\n  if (!arguments.length) return this._origins;\n  this._origins = v;\n  return this;\n};\n/**\n * Attaches socket.io to a server or port.\n *\n * @param {http.Server|Number} server or port\n * @param {Object} options passed to engine.io\n * @return {Server} self\n * @api public\n */\n\n\nServer.prototype.listen = Server.prototype.attach = function (srv, opts) {\n  if ('function' == typeof srv) {\n    var msg = 'You are trying to attach socket.io to an express ' + 'request handler function. Please pass a http.Server instance.';\n    throw new Error(msg);\n  } // handle a port as a string\n\n\n  if (Number(srv) == srv) {\n    srv = Number(srv);\n  }\n\n  if ('number' == typeof srv) {\n    debug('creating http server and binding to %d', srv);\n    var port = srv;\n    srv = http.Server(function (req, res) {\n      res.writeHead(404);\n      res.end();\n    });\n    srv.listen(port);\n  } // set engine.io path to `/socket.io`\n\n\n  opts = opts || {};\n  opts.path = opts.path || this.path(); // set origins verification\n\n  opts.allowRequest = opts.allowRequest || this.checkRequest.bind(this); // initialize engine\n\n  debug('creating engine.io instance with opts %j', opts);\n  this.eio = engine.attach(srv, opts); // attach static file serving\n\n  if (this._serveClient) this.attachServe(srv); // Export http server\n\n  this.httpServer = srv; // bind to engine events\n\n  this.bind(this.eio);\n  return this;\n};\n/**\n * Attaches the static file serving.\n *\n * @param {Function|http.Server} srv http server\n * @api private\n */\n\n\nServer.prototype.attachServe = function (srv) {\n  debug('attaching client serving req handler');\n  var url = this._path + '/socket.io.js';\n  var urlMap = this._path + '/socket.io.js.map';\n  var evs = srv.listeners('request').slice(0);\n  var self = this;\n  srv.removeAllListeners('request');\n  srv.on('request', function (req, res) {\n    if (0 === req.url.indexOf(urlMap)) {\n      self.serveMap(req, res);\n    } else if (0 === req.url.indexOf(url)) {\n      self.serve(req, res);\n    } else {\n      for (var i = 0; i < evs.length; i++) {\n        evs[i].call(srv, req, res);\n      }\n    }\n  });\n};\n/**\n * Handles a request serving `/socket.io.js`\n *\n * @param {http.Request} req\n * @param {http.Response} res\n * @api private\n */\n\n\nServer.prototype.serve = function (req, res) {\n  // Per the standard, ETags must be quoted:\n  // https://tools.ietf.org/html/rfc7232#section-2.3\n  var expectedEtag = '\"' + clientVersion + '\"';\n  var etag = req.headers['if-none-match'];\n\n  if (etag) {\n    if (expectedEtag == etag) {\n      debug('serve client 304');\n      res.writeHead(304);\n      res.end();\n      return;\n    }\n  }\n\n  debug('serve client source');\n  res.setHeader('Content-Type', 'application/javascript');\n  res.setHeader('ETag', expectedEtag);\n  res.setHeader('X-SourceMap', 'socket.io.js.map');\n  res.writeHead(200);\n  res.end(clientSource);\n};\n/**\n * Handles a request serving `/socket.io.js.map`\n *\n * @param {http.Request} req\n * @param {http.Response} res\n * @api private\n */\n\n\nServer.prototype.serveMap = function (req, res) {\n  // Per the standard, ETags must be quoted:\n  // https://tools.ietf.org/html/rfc7232#section-2.3\n  var expectedEtag = '\"' + clientVersion + '\"';\n  var etag = req.headers['if-none-match'];\n\n  if (etag) {\n    if (expectedEtag == etag) {\n      debug('serve client 304');\n      res.writeHead(304);\n      res.end();\n      return;\n    }\n  }\n\n  debug('serve client sourcemap');\n  res.setHeader('Content-Type', 'application/json');\n  res.setHeader('ETag', expectedEtag);\n  res.writeHead(200);\n  res.end(clientSourceMap);\n};\n/**\n * Binds socket.io to an engine.io instance.\n *\n * @param {engine.Server} engine engine.io (or compatible) server\n * @return {Server} self\n * @api public\n */\n\n\nServer.prototype.bind = function (engine) {\n  this.engine = engine;\n  this.engine.on('connection', this.onconnection.bind(this));\n  return this;\n};\n/**\n * Called with each incoming transport connection.\n *\n * @param {engine.Socket} conn\n * @return {Server} self\n * @api public\n */\n\n\nServer.prototype.onconnection = function (conn) {\n  debug('incoming connection with id %s', conn.id);\n  var client = new Client(this, conn);\n  client.connect('/');\n  return this;\n};\n/**\n * Looks up a namespace.\n *\n * @param {String} name nsp name\n * @param {Function} [fn] optional, nsp `connection` ev handler\n * @api public\n */\n\n\nServer.prototype.of = function (name, fn) {\n  if (String(name)[0] !== '/') name = '/' + name;\n  var nsp = this.nsps[name];\n\n  if (!nsp) {\n    debug('initializing namespace %s', name);\n    nsp = new Namespace(this, name);\n    this.nsps[name] = nsp;\n  }\n\n  if (fn) nsp.on('connect', fn);\n  return nsp;\n};\n/**\n * Closes server connection\n *\n * @param {Function} [fn] optional, called as `fn([err])` on error OR all conns closed \n * @api public\n */\n\n\nServer.prototype.close = function (fn) {\n  for (var id in this.nsps['/'].sockets) {\n    if (this.nsps['/'].sockets.hasOwnProperty(id)) {\n      this.nsps['/'].sockets[id].onclose();\n    }\n  }\n\n  this.engine.close();\n\n  if (this.httpServer) {\n    this.httpServer.close(fn);\n  } else {\n    fn && fn();\n  }\n};\n/**\n * Expose main namespace (/).\n */\n\n\nvar emitterMethods = Object.keys(Emitter.prototype).filter(function (key) {\n  return typeof Emitter.prototype[key] === 'function';\n});\nemitterMethods.concat(['to', 'in', 'use', 'send', 'write', 'clients', 'compress']).forEach(function (fn) {\n  Server.prototype[fn] = function () {\n    return this.sockets[fn].apply(this.sockets, arguments);\n  };\n});\nNamespace.flags.forEach(function (flag) {\n  Object.defineProperty(Server.prototype, flag, {\n    get: function () {\n      this.sockets.flags = this.sockets.flags || {};\n      this.sockets.flags[flag] = true;\n      return this;\n    }\n  });\n});\n/**\n * BC with `io.listen`\n */\n\nServer.listen = Server;","map":{"version":3,"sources":["/home/subho/Programming/Internet-Technology/Athena/node_modules/socket.io/lib/index.js"],"names":["http","require","read","readFileSync","engine","client","clientVersion","version","Client","Emitter","EventEmitter","Namespace","Adapter","debug","url","module","exports","Server","clientSource","undefined","clientSourceMap","srv","opts","listen","nsps","path","serveClient","adapter","origins","sockets","of","attach","prototype","checkRequest","req","fn","origin","headers","referer","_origins","indexOf","parts","parse","defaultPort","protocol","port","ok","hostname","ex","v","arguments","length","_serveClient","resolve","err","oldSettings","set","key","val","use","socket","next","request","authorized","Error","eio","console","error","_path","replace","_adapter","i","hasOwnProperty","initAdapter","msg","Number","res","writeHead","end","allowRequest","bind","attachServe","httpServer","urlMap","evs","listeners","slice","self","removeAllListeners","on","serveMap","serve","call","expectedEtag","etag","setHeader","onconnection","conn","id","connect","name","String","nsp","close","onclose","emitterMethods","Object","keys","filter","concat","forEach","apply","flags","flag","defineProperty","get"],"mappings":"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","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar http = require('http');\nvar read = require('fs').readFileSync;\nvar engine = require('engine.io');\nvar client = require('socket.io-client');\nvar clientVersion = require('socket.io-client/package').version;\nvar Client = require('./client');\nvar Emitter = require('events').EventEmitter;\nvar Namespace = require('./namespace');\nvar Adapter = require('socket.io-adapter');\nvar debug = require('debug')('socket.io:server');\nvar url = require('url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Server;\n\n/**\n * Socket.IO client source.\n */\n\nvar clientSource = undefined;\nvar clientSourceMap = undefined;\n\n/**\n * Server constructor.\n *\n * @param {http.Server|Number|Object} srv http server, port or options\n * @param {Object} [opts]\n * @api public\n */\n\nfunction Server(srv, opts){\n  if (!(this instanceof Server)) return new Server(srv, opts);\n  if ('object' == typeof srv && !srv.listen) {\n    opts = srv;\n    srv = null;\n  }\n  opts = opts || {};\n  this.nsps = {};\n  this.path(opts.path || '/socket.io');\n  this.serveClient(false !== opts.serveClient);\n  this.adapter(opts.adapter || Adapter);\n  this.origins(opts.origins || '*:*');\n  this.sockets = this.of('/');\n  if (srv) this.attach(srv, opts);\n}\n\n/**\n * Server request verification function, that checks for allowed origins\n *\n * @param {http.IncomingMessage} req request\n * @param {Function} fn callback to be called with the result: `fn(err, success)`\n */\n\nServer.prototype.checkRequest = function(req, fn) {\n  var origin = req.headers.origin || req.headers.referer;\n\n  // file:// URLs produce a null Origin which can't be authorized via echo-back\n  if ('null' == origin || null == origin) origin = '*';\n\n  if (!!origin && typeof(this._origins) == 'function') return this._origins(origin, fn);\n  if (this._origins.indexOf('*:*') !== -1) return fn(null, true);\n  if (origin) {\n    try {\n      var parts = url.parse(origin);\n      var defaultPort = 'https:' == parts.protocol ? 443 : 80;\n      parts.port = parts.port != null\n        ? parts.port\n        : defaultPort;\n      var ok =\n        ~this._origins.indexOf(parts.hostname + ':' + parts.port) ||\n        ~this._origins.indexOf(parts.hostname + ':*') ||\n        ~this._origins.indexOf('*:' + parts.port);\n      return fn(null, !!ok);\n    } catch (ex) {\n    }\n  }\n  fn(null, false);\n};\n\n/**\n * Sets/gets whether client code is being served.\n *\n * @param {Boolean} v whether to serve client code\n * @return {Server|Boolean} self when setting or value when getting\n * @api public\n */\n\nServer.prototype.serveClient = function(v){\n  if (!arguments.length) return this._serveClient;\n  this._serveClient = v;\n\n  if (v && !clientSource) {\n    clientSource = read(require.resolve('socket.io-client/dist/socket.io.min.js'), 'utf-8');\n    try {\n      clientSourceMap = read(require.resolve('socket.io-client/dist/socket.io.js.map'), 'utf-8');\n    } catch(err) {\n      debug('could not load sourcemap file');\n    }\n  }\n\n  return this;\n};\n\n/**\n * Old settings for backwards compatibility\n */\n\nvar oldSettings = {\n  \"transports\": \"transports\",\n  \"heartbeat timeout\": \"pingTimeout\",\n  \"heartbeat interval\": \"pingInterval\",\n  \"destroy buffer size\": \"maxHttpBufferSize\"\n};\n\n/**\n * Backwards compatibility.\n *\n * @api public\n */\n\nServer.prototype.set = function(key, val){\n  if ('authorization' == key && val) {\n    this.use(function(socket, next) {\n      val(socket.request, function(err, authorized) {\n        if (err) return next(new Error(err));\n        if (!authorized) return next(new Error('Not authorized'));\n        next();\n      });\n    });\n  } else if ('origins' == key && val) {\n    this.origins(val);\n  } else if ('resource' == key) {\n    this.path(val);\n  } else if (oldSettings[key] && this.eio[oldSettings[key]]) {\n    this.eio[oldSettings[key]] = val;\n  } else {\n    console.error('Option %s is not valid. Please refer to the README.', key);\n  }\n\n  return this;\n};\n\n/**\n * Sets the client serving path.\n *\n * @param {String} v pathname\n * @return {Server|String} self when setting or value when getting\n * @api public\n */\n\nServer.prototype.path = function(v){\n  if (!arguments.length) return this._path;\n  this._path = v.replace(/\\/$/, '');\n  return this;\n};\n\n/**\n * Sets the adapter for rooms.\n *\n * @param {Adapter} v pathname\n * @return {Server|Adapter} self when setting or value when getting\n * @api public\n */\n\nServer.prototype.adapter = function(v){\n  if (!arguments.length) return this._adapter;\n  this._adapter = v;\n  for (var i in this.nsps) {\n    if (this.nsps.hasOwnProperty(i)) {\n      this.nsps[i].initAdapter();\n    }\n  }\n  return this;\n};\n\n/**\n * Sets the allowed origins for requests.\n *\n * @param {String} v origins\n * @return {Server|Adapter} self when setting or value when getting\n * @api public\n */\n\nServer.prototype.origins = function(v){\n  if (!arguments.length) return this._origins;\n\n  this._origins = v;\n  return this;\n};\n\n/**\n * Attaches socket.io to a server or port.\n *\n * @param {http.Server|Number} server or port\n * @param {Object} options passed to engine.io\n * @return {Server} self\n * @api public\n */\n\nServer.prototype.listen =\nServer.prototype.attach = function(srv, opts){\n  if ('function' == typeof srv) {\n    var msg = 'You are trying to attach socket.io to an express ' +\n    'request handler function. Please pass a http.Server instance.';\n    throw new Error(msg);\n  }\n\n  // handle a port as a string\n  if (Number(srv) == srv) {\n    srv = Number(srv);\n  }\n\n  if ('number' == typeof srv) {\n    debug('creating http server and binding to %d', srv);\n    var port = srv;\n    srv = http.Server(function(req, res){\n      res.writeHead(404);\n      res.end();\n    });\n    srv.listen(port);\n\n  }\n\n  // set engine.io path to `/socket.io`\n  opts = opts || {};\n  opts.path = opts.path || this.path();\n  // set origins verification\n  opts.allowRequest = opts.allowRequest || this.checkRequest.bind(this);\n\n  // initialize engine\n  debug('creating engine.io instance with opts %j', opts);\n  this.eio = engine.attach(srv, opts);\n\n  // attach static file serving\n  if (this._serveClient) this.attachServe(srv);\n\n  // Export http server\n  this.httpServer = srv;\n\n  // bind to engine events\n  this.bind(this.eio);\n\n  return this;\n};\n\n/**\n * Attaches the static file serving.\n *\n * @param {Function|http.Server} srv http server\n * @api private\n */\n\nServer.prototype.attachServe = function(srv){\n  debug('attaching client serving req handler');\n  var url = this._path + '/socket.io.js';\n  var urlMap = this._path + '/socket.io.js.map';\n  var evs = srv.listeners('request').slice(0);\n  var self = this;\n  srv.removeAllListeners('request');\n  srv.on('request', function(req, res) {\n    if (0 === req.url.indexOf(urlMap)) {\n      self.serveMap(req, res);\n    } else if (0 === req.url.indexOf(url)) {\n      self.serve(req, res);\n    } else {\n      for (var i = 0; i < evs.length; i++) {\n        evs[i].call(srv, req, res);\n      }\n    }\n  });\n};\n\n/**\n * Handles a request serving `/socket.io.js`\n *\n * @param {http.Request} req\n * @param {http.Response} res\n * @api private\n */\n\nServer.prototype.serve = function(req, res){\n  // Per the standard, ETags must be quoted:\n  // https://tools.ietf.org/html/rfc7232#section-2.3\n  var expectedEtag = '\"' + clientVersion + '\"';\n\n  var etag = req.headers['if-none-match'];\n  if (etag) {\n    if (expectedEtag == etag) {\n      debug('serve client 304');\n      res.writeHead(304);\n      res.end();\n      return;\n    }\n  }\n\n  debug('serve client source');\n  res.setHeader('Content-Type', 'application/javascript');\n  res.setHeader('ETag', expectedEtag);\n  res.setHeader('X-SourceMap', 'socket.io.js.map');\n  res.writeHead(200);\n  res.end(clientSource);\n};\n\n/**\n * Handles a request serving `/socket.io.js.map`\n *\n * @param {http.Request} req\n * @param {http.Response} res\n * @api private\n */\n\nServer.prototype.serveMap = function(req, res){\n  // Per the standard, ETags must be quoted:\n  // https://tools.ietf.org/html/rfc7232#section-2.3\n  var expectedEtag = '\"' + clientVersion + '\"';\n\n  var etag = req.headers['if-none-match'];\n  if (etag) {\n    if (expectedEtag == etag) {\n      debug('serve client 304');\n      res.writeHead(304);\n      res.end();\n      return;\n    }\n  }\n\n  debug('serve client sourcemap');\n  res.setHeader('Content-Type', 'application/json');\n  res.setHeader('ETag', expectedEtag);\n  res.writeHead(200);\n  res.end(clientSourceMap);\n};\n\n/**\n * Binds socket.io to an engine.io instance.\n *\n * @param {engine.Server} engine engine.io (or compatible) server\n * @return {Server} self\n * @api public\n */\n\nServer.prototype.bind = function(engine){\n  this.engine = engine;\n  this.engine.on('connection', this.onconnection.bind(this));\n  return this;\n};\n\n/**\n * Called with each incoming transport connection.\n *\n * @param {engine.Socket} conn\n * @return {Server} self\n * @api public\n */\n\nServer.prototype.onconnection = function(conn){\n  debug('incoming connection with id %s', conn.id);\n  var client = new Client(this, conn);\n  client.connect('/');\n  return this;\n};\n\n/**\n * Looks up a namespace.\n *\n * @param {String} name nsp name\n * @param {Function} [fn] optional, nsp `connection` ev handler\n * @api public\n */\n\nServer.prototype.of = function(name, fn){\n  if (String(name)[0] !== '/') name = '/' + name;\n  \n  var nsp = this.nsps[name];\n  if (!nsp) {\n    debug('initializing namespace %s', name);\n    nsp = new Namespace(this, name);\n    this.nsps[name] = nsp;\n  }\n  if (fn) nsp.on('connect', fn);\n  return nsp;\n};\n\n/**\n * Closes server connection\n *\n * @param {Function} [fn] optional, called as `fn([err])` on error OR all conns closed \n * @api public\n */\n\nServer.prototype.close = function(fn){\n  for (var id in this.nsps['/'].sockets) {\n    if (this.nsps['/'].sockets.hasOwnProperty(id)) {\n      this.nsps['/'].sockets[id].onclose();\n    }\n  }\n\n  this.engine.close();\n\n  if (this.httpServer) {\n    this.httpServer.close(fn);\n  } else {\n    fn && fn();\n  }\n};\n\n/**\n * Expose main namespace (/).\n */\n\nvar emitterMethods = Object.keys(Emitter.prototype).filter(function(key){\n  return typeof Emitter.prototype[key] === 'function';\n});\n\nemitterMethods.concat(['to', 'in', 'use', 'send', 'write', 'clients', 'compress']).forEach(function(fn){\n  Server.prototype[fn] = function(){\n    return this.sockets[fn].apply(this.sockets, arguments);\n  };\n});\n\nNamespace.flags.forEach(function(flag){\n  Object.defineProperty(Server.prototype, flag, {\n    get: function() {\n      this.sockets.flags = this.sockets.flags || {};\n      this.sockets.flags[flag] = true;\n      return this;\n    }\n  });\n});\n\n/**\n * BC with `io.listen`\n */\n\nServer.listen = Server;\n"]},"metadata":{},"sourceType":"script"}